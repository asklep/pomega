<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocak 2026 NÃ¶bet Listesi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root { --primary-color: #4e73df; --secondary-color: #224abe; }
        body { background-color: #f8f9fc; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #333; }
        .header-section { background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white; padding: 30px 0; border-radius: 0 0 25px 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); mb: 30px; }
        .search-container { max-width: 600px; margin: -25px auto 30px; }
        .search-input { border-radius: 50px; padding: 15px 25px; border: none; box-shadow: 0 8px 20px rgba(0,0,0,0.15); font-size: 1.1rem; }
        .table-card { background: white; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.05); overflow: hidden; margin-bottom: 50px; }
        .table-responsive { max-height: 70vh; overflow-y: auto; }
        table { margin-bottom: 0 !important; }
        thead th { background-color: #f1f4fb !important; position: sticky; top: 0; z-index: 10; font-size: 0.85rem; text-transform: uppercase; color: #5a5c69; border-bottom: 2px solid #e3e6f0 !important; }
        tbody td { padding: 12px 8px !important; font-size: 0.9rem; border-bottom: 1px solid #eff2f7; }
        .name-col { font-weight: 600; color: #4e73df; position: sticky; left: 0; background: white; z-index: 5; border-right: 2px solid #e3e6f0; min-width: 180px; }
        .nobet-1 { background-color: #e74a3b !important; color: white !important; font-weight: bold; border-radius: 4px; display: inline-block; width: 25px; text-align: center; }
        .nobet-2 { background-color: #f6c23e !important; color: #333 !important; font-weight: bold; border-radius: 4px; display: inline-block; width: 25px; text-align: center; }
        .weekend { background-color: #fff5f5; }
        .highlight-row { background-color: #f0f3ff !important; }
    </style>
</head>
<body>

<div class="header-section text-center">
    <div class="container">
        <h1 class="fw-bold">ðŸ“… Ocak 2026 NÃ¶bet Listesi</h1>
        <p class="opacity-75">Veriler Google Sheets Ã¼zerinden anlÄ±k gÃ¼ncellenir</p>
    </div>
</div>

<div class="container">
    <div class="search-container">
        <input type="text" id="searchInput" class="form-control search-input" placeholder="Personel ismi ara..." onkeyup="filterTable()">
    </div>

    <div class="table-card">
        <div class="table-responsive">
            <table class="table table-sm" id="mainTable">
                <thead id="tableHead"></thead>
                <tbody id="tableBody">
                    <tr><td colspan="32" class="text-center p-5">Veriler yÃ¼kleniyor, lÃ¼tfen bekleyin...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<script>
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTHPuchO7TrhvUmDLHNlEvgX_5Mt8J0L0L0RTERIjaL763MY4Hr3Tt1SWIxkbjgjDoum-N-PyrcO_KC/pub?gid=1602899784&single=true&output=csv';

    function init() {
        Papa.parse(csvUrl, {
            download: true,
            header: false,
            skipEmptyLines: true,
            complete: function(results) {
                renderTable(results.data);
            }
        });
    }

    function renderTable(data) {
        const thead = document.getElementById('tableHead');
        const tbody = document.getElementById('tableBody');
        
        // BaÅŸlÄ±klarÄ± OluÅŸtur (Ä°lk iki satÄ±rÄ± birleÅŸtiriyoruz: GÃ¼n SayÄ±sÄ± ve GÃ¼n AdÄ±)
        let headHtml = '<tr><th class="name-col text-center">PERSONEL ADI</th>';
        for (let i = 1; i <= 31; i++) {
            const gunNo = data[0][i] || i;
            const gunAdi = data[1][i] || '';
            const isWeekend = (gunAdi === 'cmt' || gunAdi === 'paz');
            headHtml += `<th class="text-center ${isWeekend ? 'weekend' : ''}">${gunNo}<br><small>${gunAdi}</small></th>`;
        }
        headHtml += '</tr>';
        thead.innerHTML = headHtml;

        // SatÄ±rlarÄ± OluÅŸtur (Ä°simler 3. satÄ±rdan baÅŸlÄ±yor)
        let bodyHtml = '';
        for (let i = 2; i < data.length; i++) {
            const row = data[i];
            if(!row[0]) continue; // Ä°sim boÅŸsa atla

            bodyHtml += '<tr>';
            bodyHtml += `<td class="name-col">${row[0]}</td>`;
            
            for (let j = 1; j <= 31; j++) {
                const val = row[j] ? row[j].trim() : '';
                const gunAdi = data[1][j] || '';
                const isWeekend = (gunAdi === 'cmt' || gunAdi === 'paz');
                
                let cellContent = val;
                if(val === '1') cellContent = '<span class="nobet-1">1</span>';
                if(val === '2') cellContent = '<span class="nobet-2">2</span>';
                
                bodyHtml += `<td class="text-center ${isWeekend ? 'weekend' : ''}">${cellContent}</td>`;
            }
            bodyHtml += '</tr>';
        }
        tbody.innerHTML = bodyHtml;
    }

    function filterTable() {
        let input = document.getElementById("searchInput");
        let filter = input.value.toUpperCase();
        let table = document.getElementById("mainTable");
        let tr = table.getElementsByTagName("tr");

        for (let i = 1; i < tr.length; i++) {
            let td = tr[i].getElementsByTagName("td")[0];
            if (td) {
                let txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                    tr[i].classList.add("highlight-row");
                } else {
                    tr[i].style.display = "none";
                }
            }
            if (filter === "") tr[i].classList.remove("highlight-row");
        }
    }

    window.onload = init;
</script>

</body>
</html>
